<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Kamiko Loading Screen</title>
    <style>
        @font-face {
            font-family: 'ExoSemiBold';
            src: url('fonts/exo2-semibold.ttf') format('truetype');
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            background: #000;
            font-family: 'ExoSemiBold';
        }

        #VideoContainer {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        #BackgroundVideo {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #DarkenedVideo {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            mix-blend-mode: multiply;
            background: rgba(0, 0, 0, 0.8);
            pointer-events: none;
        }

        #HeaderBlock {
            position: absolute;
            top: 2.5vh;
            right: 2.5vw;
            z-index: 10;
        }

        #LogoImage {
            width: 90px;
            height: 83px;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 1));
            animation: GlowLogo 1.5s infinite alternate, SlideLeftLogo 1s ease-out forwards;
            opacity: 0;
        }

        #FooterBlock {
            position: absolute;
            bottom: 3vh;
            left: 2vw;
            z-index: 10;
            max-width: 40vw;
        }

        #HintTitle {
            font-size: clamp(16px,1.5vw,20px);
            color: #fff;
            margin-bottom: 1vh;
            animation: SlideRightTitle 1s ease-out forwards;
            opacity: 0;
        }

        #HintText {
            font-size: clamp(12px,1.1vw,16px);
            color: #8f8f8f;
            opacity: 1;
            max-width: 600px;
        }

        #CenterLoadingBlock {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            z-index: 20;
            width: 100vw;
            max-width: 570px;
            min-width: 260px;
            text-align: center;
            color: #fff;
        }

        #ProcessName {
            font-size: clamp(14px,1.3vw,18px);
            letter-spacing: .08em;
            text-transform: uppercase;
            margin-bottom: 1.6vh;
            text-shadow: 0 0 6px rgba(0,0,0,.8);
        }

        #ProcessBar {
            width: 100%;
            height: 15px;
            border-radius: 999px;
            background: rgba(255,255,255,.12);
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,.7);
        }

        #ProcessBarFill {
            width: 0%;
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(95deg, rgb(188, 173, 255) 0%, rgb(198, 185, 255) 100%);
            transition: width .3s ease-out;
        }

        @keyframes GlowLogo {
            from { filter: drop-shadow(0 0 2.5px rgba(255, 255, 255, 0.5)); }
            to { filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.9)); }
        }

        @keyframes SlideRightTitle {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes SlideLeftLogo {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="VideoContainer">
        <video id="BackgroundVideo" src="videos/480.mp4" autoplay muted loop playsinline></video>
        <div id="DarkenedVideo"></div>
        
        <div id="HeaderBlock">
            <img id="LogoImage" src="img/logonew.png">
        </div>
        
        <div id="FooterBlock">
            <div id="HintTitle">ИНТЕРЕСНЫЕ ФАКТЫ</div>
            <div id="HintText"></div>
        </div>

        <div id="CenterLoadingBlock">
            <div id="ProcessName">Подготовка загрузки...</div>
            <div id="ProcessBar">
                <div id="ProcessBarFill"></div>
            </div>
        </div>
    </div>

    <script>
        const HintCollectionArray = [
            "ВОЗМОЖНО КОГДА-ТО НА ЭТОТ СЕРВЕР ЗАЙДУТ ФРАНЦУЗЫ :]",
            "КОГДА-ТО ВСЁ БЫЛО ПРЕКРАСНО, НО ТЕПЕРЬ ВСЁ ЕЩЁ ЛУЧШЕ!",
            "ПРАКТИЧЕСКИ ВСЕ НАШИ РАБОТНИКИ ОТКРЫТЫ К ПРЕДЛОЖЕНИЯМ, НЕ СТЕСНЯЙТЕСЬ.",
            "РАНО ИЛИ ПОЗДНО МЫ НАЧНЁМ ЗАНИМАТЬСЯ РЕВОРКАМИ :D",
            "ЕСЛИ ЭТОТ ЭКРАН ДОЛГО ЗАГРУЖАЕТСЯ — НЕ ПАНИКУЙТЕ, ТАК И ЗАДУМАНО.",
            "ГОВОРЯТ, ЧТО ЛУЧШЕ ВСЕГО ИГРАЕТСЯ ТАМ, ГДЕ НЕ ЛАГАЕТ… К СОЖАЛЕНИЮ, ЭТО НЕ ПРО НАС.",
            "НАШ СЕРВЕР НАСТОЛЬКО КОМФОРТНЫЙ, ЧТО НЕКОТОРЫЕ БАГИ ЖИВУТ ТУТ ГОДАМИ.",
            "ЕСЛИ ВЫ УВИДЕЛИ ЧТО-ТО СТРАННОЕ — ТАК И ДОЛЖНО БЫТЬ. МЫ ТАК ЗАДУМАЛИ.",
            "СЕРВЕР МОЖЕТ НЕ ВСЁ ОБЕЩАТЬ, НО СТАБИЛЬНЫЕ КРАШИ — ГАРАНТИЯ.",
            "В БУДУЩЕМ МЫ ПЛАНИРУЕМ ДОРАБОТАТЬ МНОГОЕ...",
            "ЕСЛИ ВЫ ЭТО ЧИТАЕТЕ — ВЫ УЖЕ ЗАГРУЖАЕТЕСЬ ЛУЧШЕ, ЧЕМ БОЛЬШИНСТВО.",
            "НЕ БОЙТЕСЬ ОБРАЩАТЬСЯ К АДМИНАМ — ОНИ НЕ КУСАЮТСЯ… ЧАСТО."
        ];

        let HintTypingIntervalIdentifierValue = null;
        let FilesTotalAmountValue = 0;
        let FilesNeededAmountValue = 0;

        window.SetFilesTotal = function(TotalAmountValue) {
            FilesTotalAmountValue = parseInt(TotalAmountValue) || 0;
            UpdateLoadingProgressLine();
        };

        window.SetFilesNeeded = function(NeededAmountValue) {
            FilesNeededAmountValue = parseInt(NeededAmountValue) || 0;
            UpdateLoadingProgressLine();
        };

        window.SetStatusChanged = function(StatusTextValue) {
            const ProcessNameElement = document.getElementById("ProcessName");
            if (ProcessNameElement) ProcessNameElement.textContent = StatusTextValue;
        };

        function StartHintTypingText(NewHintTextValue) {
            const HintTextElement = document.getElementById("HintText");
            if (!HintTextElement) return;
            if (HintTypingIntervalIdentifierValue) {
                clearInterval(HintTypingIntervalIdentifierValue);
                HintTypingIntervalIdentifierValue = null;
            }
            HintTextElement.textContent = "";
            let CurrentCharIndexValue = 0;
            HintTypingIntervalIdentifierValue = setInterval(function() {
                if (CurrentCharIndexValue >= NewHintTextValue.length) {
                    clearInterval(HintTypingIntervalIdentifierValue);
                    HintTypingIntervalIdentifierValue = null;
                    return;
                }
                HintTextElement.textContent += NewHintTextValue.charAt(CurrentCharIndexValue);
                CurrentCharIndexValue++;
            }, 35);
        }

        function UpdateLoadingProgressLine() {
            const ProcessBarFillElement = document.getElementById("ProcessBarFill");
            if (!ProcessBarFillElement) return;

            if (FilesTotalAmountValue <= 0) {
                if (FilesNeededAmountValue > 0) {
                    FilesTotalAmountValue = FilesNeededAmountValue;
                } else {
                    ProcessBarFillElement.style.width = "0%";
                    return;
                }
            }

            const CompletedPartValue = Math.max(0, Math.min(1, (FilesTotalAmountValue - FilesNeededAmountValue) / FilesTotalAmountValue));
            const PercentNumberValue = Math.round(CompletedPartValue * 100);
            ProcessBarFillElement.style.width = PercentNumberValue + "%";
        }

        window.onload = function() {
            const backgroundVideo = document.getElementById("BackgroundVideo");
            backgroundVideo.play().catch(() => {});

            const randomHintIndex = Math.floor(Math.random() * HintCollectionArray.length);
            StartHintTypingText(HintCollectionArray[randomHintIndex]);

            setInterval(function() {
                const nextHintIndex = Math.floor(Math.random() * HintCollectionArray.length);
                StartHintTypingText(HintCollectionArray[nextHintIndex]);
            }, 5500);
        };
    </script>
</body>
</html>

